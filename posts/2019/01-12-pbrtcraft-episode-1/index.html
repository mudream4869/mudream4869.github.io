<!doctype html><html lang=zh-tw><head><script async src="https://www.googletagmanager.com/gtag/js?id=G-05CDSVM4JL"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-05CDSVM4JL",{anonymize_ip:!1})}</script><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><title>PbrtCraft 用 pbrt 畫 Minecraft 遊戲場景 &#183; Imaginary City</title><link rel=stylesheet href=/css/style.css><link rel=stylesheet href=/css/fonts.css><link rel=stylesheet href=/custom.css><link rel=icon href=favicon.ico><link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png><link href rel=alternate type=application/rss+xml title="Imaginary City"></head><body><nav class=nav><div class=nav-container><a href=/><h2 class=nav-title>Imaginary City</h2></a><ul><li><a href=/about/><span>About</span></a></li><li><a href=https://blog.mukyu.tw/note-of-code/><span>Notes</span></a></li><li><a href=/oj/><span>OJ</span></a></li><li><a href=/posts/><span>Posts</span></a></li><li><a href=/tags/><span>Tags</span></a></li></ul></div></nav><main><div class=post><div class=post-info><br><time datetime="2019-01-12 08:00:00 +0000 UTC">January 12, 2019</time></div><h1 class=post-title>PbrtCraft 用 pbrt 畫 Minecraft 遊戲場景</h1><p style=text-align:center><a href=/tags/Rendering>#Rendering</a>
<a href=/tags/Python>#Python</a>
<a href=/tags/Pbrtcraft>#Pbrtcraft</a></p><div class=post-line></div><p>這是一個在學期中忽然有要做的專案：把 Minecraft 的遊戲畫面用基於物理方式，像是光線追蹤或光子映射的方式畫出來。</p><p>我已經先在 Github 上開了 <a href=https://github.com/PbrtCraft>PbrtCraft</a> 。</p><h2 id=流程>流程</h2><p>我目前弄的 Pipeline 就是先讀取 Minecraft 的地圖檔案，生成場景描述，然後送到 pbrt-v2 畫。</p><h3 id=讀取-minecraft>讀取 Minecraft</h3><p>直接用 <a href=https://github.com/DonoA/PyAnvilEditor>PyAnvilEditor</a>來讀取。</p><h3 id=生成場景描述>生成場景描述</h3><p>這裡就會需要取得到 Minecraft 的資源包，資源包有兩部分，第一部分是描述模型，第二部分則是所有貼圖。</p><h3 id=pbrt-v2>pbrt-v2</h3><p>針對原本的 pbrt-v2 ，為了能夠方便渲染 Minecraft 場景，我做了以下調整：</p><ul><li>Texture Sampling 改用 Neareast Neighbor</li><li>新增 Shape : Quad</li><li>Image Material 增加 Tint Spectrum 屬性</li><li>增加讀取 PNG 的 RGBA</li></ul><h2 id=目前成果>目前成果</h2><p>天空 HDR 來自 <a href=https://hdrihaven.com/hdris/>HDRI Haven</a></p><p>畫面來自 Minecraft 1.13 ，右邊半透明的是水。
<img src=pano.png alt></p><h2 id=接下來>接下來？</h2><p>仍然有不少事情等著，像是 Volume ，除了水暫時當作玻璃，其餘如火、岩漿等，我並沒有寫進場景描述。</p><p>生物，包含 NPC 、怪物以及一般生物，目前還並沒有讀取並且畫出來，這需要讀取地圖上生物的位置資訊以及他們的模型。</p><p>光源，例如火把、南瓜燈 &mldr; 等，假如需要符合 Minecraft 的模型，卻又有不錯的渲染效果，那可能需要寫一些不太符合物理性質的光源，像是不會直射眼睛，但卻會影響周遭。</p><p>pbrt 部分改用 pbrt-v3 ，這樣就可以用到更新過的 OpenEXR 和使用 sppm 渲染。</p><p>增加一個 GUI ，讓一般玩家也可以輕易操作，目前考慮是用 Tornado 架 Server ，這樣一些開 Server 的也可以用這個來畫場景。</p><hr><script src=https://utteranc.es/client.js repo=mudream4869/imgcity-comment issue-term=pathname theme=github-light crossorigin=anonymous async></script></div><div class=pagination><a href=/posts/2018/09-12-record-gaming-moment/ class="left arrow">&#8592;Recording Gaming Moment</a>
<a href=/posts/2019/01-31-master-second-winter/ class="right arrow">碩二上總結&#8594;</a>
<a href=# class=top>Top</a></div></main><footer><span>&copy; <time datetime="2023-05-30 13:17:57.504642858 +0000 UTC m=+0.233873260">2023</time> Mudream. Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.</span></footer></body></html>
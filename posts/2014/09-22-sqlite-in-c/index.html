<!doctype html><html lang=zh-tw>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Sqlite3 in C &#183; Imaginary City</title>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link rel=stylesheet href=/custom.css>
<link rel=icon href=favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png>
<link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png>
<link href rel=alternate type=application/rss+xml title="Imaginary City">
</head>
<body>
<nav class=nav>
<div class=nav-container>
<a href=/>
<h2 class=nav-title>Imaginary City</h2>
</a>
<ul>
<li>
<a href=/about/>
<span>About</span>
</a>
</li>
<li>
<a href=/notes/>
<span>Notes</span>
</a>
</li>
<li>
<a href=/posts/>
<span>Posts</span>
</a>
</li>
<li>
<a href=/tags/>
<span>Tags</span>
</a>
</li>
</ul>
</div>
</nav>
<main>
<div class=post>
<div class=post-info>
<br>
<time datetime="2014-09-22 08:00:00 +0000 UTC">September 22, 2014</time>
</div>
<h1 class=post-title>Sqlite3 in C</h1>
<p style=text-align:center>
<a href=/tags/C>#C</a>
</p>
<div class=post-line></div>
<h1 id=sqlite3-in-c>Sqlite3 in C</h1>
<p>最近在弄一些東西的時後發現有時會想要實作一些構想
然後又大概只是實驗性質的，資料庫內的資料並不會爆炸
<code>Sqlite</code> 就變成首選啦！</p>
<p>首先要在linux底下用他，必須先建制好環境：</p>
<div class=highlight><div style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=2><a style=outline:none;text-decoration:none;color:inherit href=#2>2</a>
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>sudo apt-get install sqlite3
sudo apt-get install libsqlite3-dev
</code></pre></td></tr></table>
</div>
</div><p>然後這是範例code：</p>
<div class=highlight><div style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=1><a style=outline:none;text-decoration:none;color:inherit href=#1> 1</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=2><a style=outline:none;text-decoration:none;color:inherit href=#2> 2</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=3><a style=outline:none;text-decoration:none;color:inherit href=#3> 3</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=4><a style=outline:none;text-decoration:none;color:inherit href=#4> 4</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=5><a style=outline:none;text-decoration:none;color:inherit href=#5> 5</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=6><a style=outline:none;text-decoration:none;color:inherit href=#6> 6</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=7><a style=outline:none;text-decoration:none;color:inherit href=#7> 7</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=8><a style=outline:none;text-decoration:none;color:inherit href=#8> 8</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=9><a style=outline:none;text-decoration:none;color:inherit href=#9> 9</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=10><a style=outline:none;text-decoration:none;color:inherit href=#10>10</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=11><a style=outline:none;text-decoration:none;color:inherit href=#11>11</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=12><a style=outline:none;text-decoration:none;color:inherit href=#12>12</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=13><a style=outline:none;text-decoration:none;color:inherit href=#13>13</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=14><a style=outline:none;text-decoration:none;color:inherit href=#14>14</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=15><a style=outline:none;text-decoration:none;color:inherit href=#15>15</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=16><a style=outline:none;text-decoration:none;color:inherit href=#16>16</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=17><a style=outline:none;text-decoration:none;color:inherit href=#17>17</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=18><a style=outline:none;text-decoration:none;color:inherit href=#18>18</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=19><a style=outline:none;text-decoration:none;color:inherit href=#19>19</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=20><a style=outline:none;text-decoration:none;color:inherit href=#20>20</a>
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=21><a style=outline:none;text-decoration:none;color:inherit href=#21>21</a>
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=color:#228b22>// test.c
</span><span style=color:#228b22></span><span style=color:#1e889b>#include</span><span style=color:#1e889b>&lt;sqlite3.h&gt;</span><span style=color:#1e889b>
</span><span style=color:#1e889b>#include</span><span style=color:#1e889b>&lt;stdio.h&gt;</span><span style=color:#1e889b>
</span><span style=color:#1e889b></span><span style=color:#00688b;font-weight:700>int</span> <span style=color:#008b45>main</span>(){
    sqlite3* db;
    <span style=color:#00688b;font-weight:700>char</span>* errmsg = <span style=color:#658b00>NULL</span>; 
    <span style=color:#00688b;font-weight:700>char</span>** result;
    <span style=color:#8b008b;font-weight:700>if</span>(sqlite3_open_v2(<span style=color:#cd5555>&#34;main.db&#34;</span>, &amp;db, 
                       SQLITE_OPEN_READWRITE | SQLITE_OPEN_CREATE, <span style=color:#658b00>NULL</span>)){
        printf(<span style=color:#cd5555>&#34;error!</span><span style=color:#cd5555>\n</span><span style=color:#cd5555>&#34;</span>);
    }
    sqlite3_exec(db, <span style=color:#cd5555>&#34;CREATE TABLE tbtest(pid int, ptitle char(50))&#34;</span>,
        <span style=color:#b452cd>0</span>, <span style=color:#b452cd>0</span>, &amp;errmsg);

    sqlite3_exec(db, <span style=color:#cd5555>&#34;INSERT INTO (pid, ptitle) VALUES (1, &#39;test1&#39;)&#34;</span>,
        <span style=color:#b452cd>0</span>, <span style=color:#b452cd>0</span>, &amp;errmsg);

    printf(<span style=color:#cd5555>&#34;%lld</span><span style=color:#cd5555>\n</span><span style=color:#cd5555>&#34;</span>, sqlite3_last_insert_rowid(db));
    sqlite3_close(db);
    <span style=color:#8b008b;font-weight:700>return</span> <span style=color:#b452cd>0</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>注意：
要編譯程式時必須link sqlite3</p>
<div class=highlight><div style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4>
<table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f" id=1><a style=outline:none;text-decoration:none;color:inherit href=#1>1</a>
</span></code></pre></td>
<td style=vertical-align:top;padding:0;margin:0;border:0;width:100%>
<pre tabindex=0 style=background-color:#eed;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>gcc test.c -lsqlite3 -o test
</code></pre></td></tr></table>
</div>
</div><p>在開發時，可以搭配<code>sqliteman</code> GUI界面 。</p>
<hr>
<script src=https://utteranc.es/client.js repo=mudream4869/imgcity-comment issue-term=pathname theme=github-light crossorigin=anonymous async></script>
</div>
<div class=pagination>
<a href=/posts/2014/11-01-my-first-online-judge/ class="right arrow">
我的第一個Online Judge&#8594;
</a>
<a href=# class=top>Top</a>
</div>
</main>
<footer>
<span>
&copy; <time datetime="2022-01-21 13:30:48.244460504 +0000 UTC m=+0.058983139">2022</time> Mudream. Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.
</span>
</footer>
</body>
</html>
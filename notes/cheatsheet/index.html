<!doctype html><html lang=zh-tw>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<title> &#183; Imaginary City</title>
<link rel=stylesheet href=/css/style.css>
<link rel=stylesheet href=/css/fonts.css>
<link rel=stylesheet href=/custom.css>
<link rel=icon href=favicon.ico>
<link rel=icon type=image/png sizes=32x32 href=/images/favicon-32x32.png>
<link rel=icon type=image/png sizes=16x16 href=/images/favicon-16x16.png>
<link rel=apple-touch-icon sizes=180x180 href=/images/apple-touch-icon.png>
<link href=/notes/cheatsheet/index.xml rel=alternate type=application/rss+xml title="Imaginary City">
</head>
<body>
<nav class=nav>
<div class=nav-container>
<a href=/>
<h1 class=nav-title>Imaginary City</h1>
</a>
<ul>
<li>
<a href=/about/>
<span>About</span>
</a>
</li>
<li>
<a href=/notes/>
<span>Notes</span>
</a>
</li>
<li>
<a href=/posts/>
<span>Posts</span>
</a>
</li>
</ul>
</div>
</nav>
<main>
<div class=post>
<h1 id=cheatsheet>Cheatsheet</h1>
<p>有點雜亂的 Cheatsheet 。</p>
<h2 id=python>Python</h2>
<h3 id=unzip>Unzip</h3>
<p><a href=https://stackoverflow.com/questions/3451111/unzipping-files-in-python>Unzipping file in python</a></p>
<pre tabindex=0><code>import zipfile
with zipfile.ZipFile(path_to_zip_file, 'r') as zip_ref:
    zip_ref.extractall(directory_to_extract_to)
</code></pre><h2 id=virtualenv>VirtualEnv</h2>
<pre tabindex=0><code>$ virtualenv {{env name}}
$ source bin/activate
</code></pre><h2 id=postgresql>Postgresql</h2>
<ul>
<li>phppgadmin</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cp /etc/apache2/conf.d/phppgadmin /etc/apache2/conf-enabled/phppgadmin.conf
</code></pre></div><ul>
<li>建立使用者</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo -u postgres createuser --superuser $USER
$ sudo -u postgres psql
</code></pre></div><pre tabindex=0><code>postgres=# \password $USER
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo -u postgres createdb $USER
$ sudo -u postgres dropdb  <span style=color:#f92672>[</span>option...<span style=color:#f92672>]</span> dbname
</code></pre></div><ul>
<li>資料備份</li>
</ul>
<p>DUMP + UP:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pg_dump dbname &gt; outfile
$ pg_dumpall &gt; outfile
</code></pre></div><p>Dump Only Schema :</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ pg_dump -s &gt; outfile
</code></pre></div><h2 id=ssh-安全>ssh 安全</h2>
<ul>
<li>禁止ssh root</li>
</ul>
<pre tabindex=0><code>sed -i 's/PermitRootLogin yes/PermitRootLogin no/g' /etc/ssh/sshd_config
/etc/init.d/ssh restart
</code></pre><ul>
<li><a href=http://www.study-area.org/tips/ssh_tips.htm>ssh 小技巧</a></li>
</ul>
<h2 id=vim>Vim</h2>
<ul>
<li>Makefile tab : <code>&lt;C-V>&lt;Tab></code></li>
</ul>
<h2 id=git>Git</h2>
<h3 id=移除-submodule>移除 Submodule</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mv a/submodule a/submodule_tmp

git submodule deinit -f -- a/submodule    
rm -rf .git/modules/a/submodule
git rm -f a/submodule
</code></pre></div><h2 id=bash>Bash</h2>
<h3 id=尋找並且取代>尋找並且取代</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sed -i <span style=color:#e6db74>&#39;s/old-text/new-text/g&#39;</span> filename
</code></pre></div><h3 id=尋找超過-1m-的檔案>尋找超過 1M 的檔案</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>find . -type f -size +1M
</code></pre></div><h3 id=尋找某些檔案>尋找某些檔案</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>find -L . -name <span style=color:#e6db74>&#39;*.png&#39;</span>
</code></pre></div><h3 id=在指定位置解開-deb-package>在指定位置解開 deb package</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dpkg -x <span style=color:#f92672>{</span>deb filename<span style=color:#f92672>}</span> <span style=color:#f92672>{</span>target folder<span style=color:#f92672>}</span>
</code></pre></div><h3 id=cmake-顯示所有-option>CMake 顯示所有 option</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cmake -LA
</code></pre></div><h2 id=ansible>Ansible</h2>
<h3 id=python-版本問題>Python 版本問題</h3>
<p>Ansible 錯誤訊息：</p>
<pre tabindex=0><code>An unhandled exception occurred while running the lookup plugin 'hashi_vault'.
Error was a &lt;class 'ansible.errors.AnsibleError'&gt;,
original message:
Please pip install hvac to use the hashi_vault lookup module.
</code></pre><p>請檢查 Ansible 的 Python env</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ansible -m debug -a <span style=color:#e6db74>&#39;var=ansible_playbook_python&#39;</span> localhost
</code></pre></div><pre tabindex=0><code>localhost | SUCCESS =&gt; {
    &quot;ansible_playbook_python&quot;: &quot;/usr/local/Cellar/ansible/2.6.0/libexec/bin/python2.7&quot;
}
</code></pre><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>source /usr/local/Celler/ansible/2.6.0/libexec/bin/activate
pip install hvac
</code></pre></div><p><a href=https://github.com/ansible/ansible/issues/28050#issuecomment-402220672>參考資料</a></p>
</div>
</main>
<footer>
<span>
&copy; <time datetime="2022-01-06 16:03:09.457550393 +0000 UTC m=+0.057079523">2022</time> Mudream. Made with <a href=https://gohugo.io>Hugo</a> using the <a href=https://github.com/EmielH/tale-hugo/>Tale</a> theme.
</span>
</footer>
</body>
</html>